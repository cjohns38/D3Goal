<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Base page</title>
	<script src="https://d3js.org/d3.v3.min.js"></script>
	<link rel="stylesheet" href="css/base.css">
</head>

<!-- Blank body - Everything is generated by D3 --> 
<body>


	<div id="container">
	</div>


</body>

	<script> 
		// Set the page title 
		d3.select("title").text("Simple Bar Chart")
		
		// Container 
		container = d3.select("#container")
		var simpleStatic = container.append("div").attr("id", "simplestatic")
		simpleStatic.append("h1").text("Simple Static Bar Chart")
		
		//Width, height, padding
		var w = 600;
		var h = 250;
		var padding = 25;

		// Data! 
		var data = [ 5, 10, 13, 19, 21, 25, 22, 18, 15, 13,
			     11, 12, 15, 20, 18, 17, 16, 18, 23, 25 
                           ];

		//Configure x and y scale functions
		//Note each scale accounts for padding
		var xScale = d3.scale.ordinal()
				     .domain(d3.range(data.length))
				     .rangeRoundBands([ padding, w - padding ], 0.05);

		//Note y scale inverts values, so larger inputs return smaller
		//outputs.  That's because we want the y value for the "top" 
		//of each bar.  You could flip the two range values to take
		//the opposite approach.
		var yScale = d3.scale.linear()
				     .domain([ 0, d3.max(data) ])
				     .rangeRound([ h - padding, padding ]);

		//Configure y axis generator
		var yAxis = d3.svg.axis()
				  .scale(yScale)
				  .orient("left")
				  .ticks(5);
		
		//Create SVG element
		var svg = simpleStatic.append("svg")
			           .attr("width", w)
			           .attr("height", h);

		//Create bars
		svg.selectAll("rect")
		   .data(data)
		   .enter()
		   .append("rect")
		   .attr("x", function(d, i) {
		   		//x scale is ordinal, so using the index value for each element
		   		//here simply moves subsequent bars farther to the right
		   		return xScale(i);
		   })
		   .attr("y", function(d) {
		   		//y scale is linear, so data value sets the starting point
		   		//or "top" of the bar
		   		return yScale(d);
		   })
		   .attr("width", xScale.rangeBand())  //All bars have the same width
		   .attr("height", function(d) {
		   		//We do some math to get the height or bottom edge of each bar,
		   		//by subtracting the scaled value (the "top"), from the height
		   		//of the entire image, minus padding
		   		return h - padding - yScale(d);
		   })
		   .attr("fill", "SteelBlue");


		//Create y axis
		svg.append("g")
			.attr("class", "axis")
			.attr("transform", "translate(" + padding + ",0)")
			.call(yAxis);

	
	</script> 

	<script> 

		// Container 
		container = d3.select("#container")
		
		var randomStatic = container.append("div").attr("id", "randomstatic")	
		randomStatic.append("h1").text("Randomly generated Static Bar Chart")
		randomStatic.append("p").text("Data here is being randomly generated on the fly")
		randomStatic.append("div").attr("id", "chart")	
		randomStatic.append("div").attr("id", "button")	

		// Add button 
		randomStatic.select("div#button")
                            .append("button")
                            .text("RandomData")
                            .attr("id", "mybutton")
                            .attr("onclick", "randomBarChart()")

		// Run the Random chart the first time
		randomBarChart()

		//Width, height, padding
		var w = 600;
		var h = 250;
		var padding = 25;


		// Functions 
		function randomValue (min, max) {
                	min = Math.ceil(min); 
                        max = Math.floor(max);
                        return Math.floor(Math.random() * (max - min)) + min; 
                }

		function randomData(amount) { 
		    var out = [];
		    for (i = 0; i < amount; i++) 
                            out.push(randomValue(1,100));
	            console.log(out);
                    return out;
                }

		function randomBarChart() { 
			
			// Remove svg if it's already there
			if (d3.select("svg#randomBarChart").empty() === false) { 
				d3.select("svg#randomBarChart").remove(); 
			};

			//Create SVG element
			var chartdiv = d3.select("div#chart")
			var svg = chartdiv.append("svg")
				      .attr("id", "randomBarChart")
				      .attr("width", w)
				      .attr("height", h);

			//Data 
			var data2 = randomData(10);
			
			//Configure x and y scale functions
			//Note each scale accounts for padding
			var xScale = d3.scale.ordinal()
					     .domain(d3.range(data2.length))
					     .rangeRoundBands([ padding, w - padding ], 0.05);

			//Note y scale inverts values, so larger inputs return smaller
			//outputs.  That's because we want the y value for the "top" 
			//of each bar.  You could flip the two range values to take
			//the opposite approach.
			var yScale = d3.scale.linear()
					     .domain([ 0, d3.max(data2) ])
					     .rangeRound([ h - padding, padding ]);

			//Configure y axis generator
			var yAxis = d3.svg.axis()
					  .scale(yScale)
					  .orient("left")
					  .ticks(5);
		


			//Create bars
			svg.selectAll("rect")
			   .data(data2)
			   .enter()
			   .append("rect")
			   .attr("x", function(d, i) {
			   		//x scale is ordinal, so using the index value for each element
			   		//here simply moves subsequent bars farther to the right
			   		return xScale(i);
			   })
			   .attr("y", function(d) {
			   		//y scale is linear, so data value sets the starting point
			   		//or "top" of the bar
			   		return yScale(d);
			   })
			   .attr("width", xScale.rangeBand())  //All bars have the same width
			   .attr("height", function(d) {
			   		//We do some math to get the height or bottom edge of each bar,
			   		//by subtracting the scaled value (the "top"), from the height
			   		//of the entire image, minus padding
			   		return h - padding - yScale(d);
			   })
			   .attr("fill", "SteelBlue");


			//Create y axis
			svg.append("g")
				.attr("class", "axis")
				.attr("transform", "translate(" + padding + ",0)")
				.call(yAxis);
		};


	// Add footer
	d3.select("div#container").append('div').attr('id','footer')
	d3.select("div#footer").html("<a href='Index.html'><button>Home</button></a>")

	</script> 




</html>
